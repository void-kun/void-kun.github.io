{"timestamp": "Chu Nhat, 30 thg 1, 2023", "title": "AWS - Gi\u1edbi thi\u1ec7u v\u1ec1 S3 (Amazone Simple Storage Service)", "slug": "aws-s3", "categories": [{"name": "AWS", "path": "aws"}], "summary": "B\u00e0i vi\u1ebft gi\u1edbi thi\u1ec7u kh\u00e1i qu\u00e1t v\u1ec1 c\u00e1c AWS S3", "markdown": ["", "Amazon S3 (Amazon Simple Storage Service) ", "---", "", "Amazon S3 is an ___object storage service___ that offers scalability, data availability, security and performance. ", "", "### I. Features of Amazone S3", "", "#### 1. Storage classes", "", "Amazon S3 cung c\u1ea5p c\u00e1c l\u1edbp l\u01b0u tr\u1eef cho nhi\u1ec1u tr\u01b0\u1eddng h\u1ee3p kh\u00e1c nhau:", "- ***S3 Standard*** L\u01b0u tr\u1eef c\u00e1c d\u1eef li\u1ec7u quan tr\u1ecdng v\u00e0 truy c\u1eadp th\u01b0\u1eddng xuy\u00ean", "- ***S3 Standard - IA*** or ***S3 One Zone - IA*** L\u01b0u tr\u1eef c\u00e1c d\u1eef li\u1ec7u \u00edt \u0111\u01b0\u1ee3c truy c\u1eadp \u0111\u1ec3 gi\u1ea3m chi ph\u00ed", "- ***S3 Glacier Instant Retrieval***, ***S3 Glacier Flexible Retrieval*** and ***S3 Glacier Deep Archive*** L\u01b0u tr\u1eef d\u1eef li\u1ec7u v\u1edbi chi ph\u00ed th\u1ea5p nh\u1ea5t ", "- ***S3 Intelligent-Tiering*** Gi\u00fap t\u1ed1i \u01b0u h\u00f3a chi ph\u00ed b\u1eb1ng c\u00e1ch t\u1ef1 \u0111\u1ed9ng di chuy\u1ec3n d\u1eef li\u1ec7u c\u1ee7a b\u1ea1n gi\u1eefa c\u00e1c lo\u1ea1i classes khi access pattern c\u1ee7a b\u1ea1n thay \u0111\u1ed5i", "", " > Chi ti\u1ebft v\u1ec1 AWS S3 Storage Classes s\u1ebd \u0111\u01b0\u1ee3c t\u00e1ch ra m\u1ed9t b\u00e0i kh\u00e1c", "", "#### 2. Storage management", "", "Amazon S3 cung c\u1ea5p nhi\u1ec1u ch\u1ee9c n\u0103ng \u0111\u1ec3 audit v\u00e0 qu\u1ea3n l\u00fd vi\u1ec7c truy c\u1eadp v\u00e0o c\u00e1c buckets v\u00e0 objects. M\u1eb7c \u0111\u1ecbnh th\u00ec S3 buckets v\u00e0 c\u00e1c object \u0111\u1ec1u l\u00e0 private.   ", "C\u00e1c t\u00ednh n\u0103ng gi\u00fap qu\u1ea3n l\u00fd vi\u1ec7c c\u1ea5p ph\u00e1t t\u00e0i nguy\u00ean S3: ", "- __S3 Block Public Access__ Ch\u1eb7n c\u00e1c truy c\u1eadp c\u00f4ng khai v\u00e0o c\u00e1c bucket v\u00e0 objects. M\u1eb7c \u0111\u1ecbnh th\u00ec vi\u1ec7c ch\u1eb7n truy c\u1eadp c\u00f4ng khai \u0111\u01b0\u1ee3c b\u1eadt \u1edf level __account__ v\u00e0 __bucket__", "- __AWS Identity and Access Management (IAM)__ T\u1ea1o IAM users cho AWS account \u0111\u1ec3 qu\u1ea3n l\u00fd vi\u1ec7c truy c\u1eadp v\u00e0o t\u00e0i nguy\u00ean S3 c\u1ee7a b\u1ea1n.", "- __Bucket policies__ S\u1eed d\u1ee5ng **IAM-based policy** \u0111\u1ec3 c\u1ea5u h\u00ecnh quy\u1ec1n truy c\u1eadp __resource base__ cho c\u00e1c __bucket__ v\u00e0 __objects__.", "- __Amazon S3 access points__ C\u1ea5u h\u00ecnh endpoint cho c\u00e1c  d\u1eef li\u1ec7u c\u00f3 chung permission rules.", "- __Access control list (ACLs)__ C\u1ea5p quy\u1ec1n \u0111\u1ecdc v\u00e0 vi\u1ebft c\u00e1c buckets v\u00e0 object cho users. \u0110\u01b0\u1ee3c t\u1ea1o ra tr\u01b0\u1edbc resource-base v\u00e0 IAM.", "- __S3 Object Ownership__ Disable ACLs v\u00e0 s\u1edf h\u1eefu m\u1ecdi object trong bucket.", "- __Access Analyzer for S3__ \u0110\u00e1nh gi\u00e1 v\u00e0 giam s\u00e1t c\u00e1c policies truy c\u1eadp S3 bucket, \u0111\u1ea3m b\u1ea3o c\u00e1c policies n\u00e0y ch\u1ec9 cung c\u1ea5p quy\u1ec1n truy c\u1eadp d\u1ef1 ki\u1ebfn v\u00e0o c\u00e1c S3 resources c\u1ee7a b\u1ea1n.", "", "#### 3. Data processing", "", "\u0110\u1ec3 bi\u1ebfn \u0111\u1ed5i d\u1eef li\u1ec7u v\u00e0 trigger workflows t\u1ef1 \u0111\u1ed9ng, c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng 2 c\u00e1ch sau:", "- __S3 Object Lambda__ Th\u00eam code v\u00e0o c\u00e1c requests S3 GET, HEAD and LIST \u0111\u1ec3 thay \u0111\u1ed5i v\u00e0 x\u1eed l\u00fd d\u1eef li\u1ec7u tr\u01b0\u1edbc khi tr\u1ea3 v\u1ec1.", "- __Event notifications__ T\u1ea1o c\u00e1c trigger workflows v\u00e0 s\u1eed d\u1ee5ng __Amazon SNS__, __Amazon SQS__ v\u00e0 __Amazon Lambda__ khi c\u00f3 thay \u0111\u1ed5i \u0111\u1ed1i v\u1edbi c\u00e1c S3 resources.", "", "#### 4. Storage logging and monitoring", "", "Amazon S3 cung c\u1ea5p c\u00e1c tools \u0111\u1ec3 gi\u00e1m s\u00e1t v\u00e0 ghi log \u0111\u1ec3 ki\u1ec3m so\u00e1t c\u00e1c S3 resources \u0111ang \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng.", "", "C\u00e1c c\u00f4ng c\u1ee5 gi\u00e1m s\u00e1t t\u1ef1 \u0111\u1ed9ng: ", "- __Amazon CloudWatch metrics for Amazon S3__ Theo d\u00f5i t\u00ecnh tr\u1ea1ng ho\u1ea1t \u0111\u1ed9ng c\u1ee7a c\u00e1c S3 resources v\u00e0 c\u1ea5u h\u00ecnh c\u1ea3nh b\u00e1o thanh to\u00e1n khi \u0111\u1ebfn ng\u01b0\u1ee1ng.", "- __AWS CloudTrail__ Ghi l\u1ea1i c\u00e1c h\u00e0nh \u0111\u1ed9ng c\u1ee7a m\u1ed9t user, m\u1ed9t role ho\u1eb7c m\u1ed9t AWS service n\u00e0o \u0111\u00f3 trong Amazon S3. CloudTrail logs cung c\u1ea5p n\u1ed9i dung chi ti\u1ebft API tracking \u1edf bucket-level v\u00e0 object-level.", "", "C\u00e1c c\u00f4ng c\u1ee5 gi\u00e1m s\u00e1t th\u1ee7 c\u00f4ng:", "- __Server access loging__ Ghi l\u1ea1i chi ti\u1ebft c\u00e1c requests \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n \u0111\u1ed1i v\u1edbi bucket. Th\u01b0\u1eddng \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 ki\u1ec3m tra b\u1ea3o m\u1eadt v\u00e0 truy c\u1eadp, t\u00ecm hi\u1ec3u v\u1ec1 c\u01a1 s\u1edf kh\u00e1ch h\u00e0ng v\u00e0 hi\u1ec3u v\u1ec1 h\u00f3a \u0111\u01a1n Amazon S3.", "- __AWS Trusted Advisor__ \u0110\u00e1nh gi\u00e1 t\u00e0i kho\u1ea3n c\u1ee7a b\u1ea1n \u0111\u1ec3 x\u00e1c \u0111\u1ecbnh c\u00e1c c\u00e1ch t\u1ed1i \u01b0u h\u00f3a c\u01a1 s\u1edf h\u1ea1 t\u1ea7ng AWS, nh\u1eb1m c\u1ea3i thi\u1ec7n b\u1ea3o m\u1eadt, hi\u1ec7u su\u1ea5t, gi\u1ea3m chi ph\u00ed v\u00e0 theo d\u00f5i \u0111\u1ecbnh m\u1ee9c d\u1ecbch v\u1ee5.", "", "#### 5. Analytics and insights", "", "Amazon S3 cung c\u1ea5p c\u00e1c d\u1ecbch v\u1ee5 gi\u00fap hi\u1ec3u r\u00f5 v\u1ec1 m\u1ee9c \u0111\u1ed9 s\u1eed d\u1ee5ng b\u1ed9 nh\u1edb, \u0111\u1ec3 c\u00f3 th\u1ec3 ph\u00e2n t\u00edch v\u00e0 t\u1ed1i \u01b0u h\u00f3a b\u1ed9 nh\u1edb.", "- __Amazon S3 Storage Lens__ S\u1eed d\u1ee5ng \u0111\u1ec3 gi\u00fap b\u1ea1n hi\u1ec3u, ph\u00e2n t\u00edch v\u00e0 t\u1ed1i \u01b0u storage c\u1ee7a b\u1ea1n.", "- __Storage Class Analysis__", "- __S3 Inventory with Inventory reports__", "", "", "### II. How Amazon S3 works", "", "Amazon S3 l\u00e0 d\u1ecbch v\u1ee5 l\u01b0u tr\u1eef d\u1eef li\u1ec7u d\u1ea1ng \u0111\u1ed1i t\u01b0\u1ee3ng, c\u00e1c d\u1eef li\u1ec7u \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong c\u00e1c buckets. M\u1ed9t \u0111\u1ed1i t\u01b0\u1ee3ng l\u00e0 m\u1ed9t file v\u00e0 c\u00e1c metadata m\u00f4 t\u1ea3 file \u0111\u00f3. ", "", "__Bucket__ : Bucket l\u00e0 m\u1ed9t container \u0111\u1ec3 l\u01b0u tr\u1eef c\u00e1c objects tr\u00ean S3. C\u00f3 th\u1ec3 l\u01b0u tr\u1eef bao nhi\u00eau objects trong 1 bucket c\u0169ng \u0111\u01b0\u1ee3c, nh\u01b0ng ch\u1ec9 \u0111\u01b0\u1ee3c c\u00f3 100 buckets trong 1 account (\u0110\u1ec3 c\u00f3 th\u1ebf t\u0103ng s\u1ed1 l\u01b0\u1ee3ng buckets, c\u1ea7n request).", "", "Khi t\u1ea1o 1 bucket, c\u1ea7n nh\u1eadp bucket name v\u00e0 ch\u1ecdn region. Sau khi t\u1ea1o, kh\u00f4ng th\u1ec3 \u0111\u1ed5i t\u00ean c\u1ee7a bucket v\u00e0 region \u0111\u00e3 ch\u1ecdn. T\u00ean c\u1ee7a bucket ph\u1ea3i tu\u00e2n th\u1ee7 rules sau:", "- Ph\u1ea3i c\u00f3 t\u1ed1i thi\u1ec3u 3 k\u00fd t\u1ef1 v\u00e0 t\u1ed1i \u0111a 63 k\u00fd t\u1ef1", "- T\u00ean ch\u1ec9 \u0111\u01b0\u1ee3c ch\u1ee9a c\u00e1c ch\u1eef c\u00e1i vi\u1ebft th\u01b0\u1eddng, s\u1ed1, d\u1ea5u ch\u1ea5m (.) v\u00e0 d\u1ea5u g\u1ea1ch ngang (-)", "- T\u00ean ph\u1ea3i b\u1eaft \u0111\u1ea7u v\u00e0 k\u1ebft th\u00fac v\u1edbi k\u00fd t\u1ef1 ho\u1eb7c s\u1ed1", "- T\u00ean kh\u00f4ng \u0111\u01b0\u1ee3c ch\u1ee9a 2 d\u1ea5u (.) li\u1ec1n nhau", "- T\u00ean kh\u00f4ng \u0111\u01b0\u1ee3c c\u00f3 format d\u1ea1ng \u0111\u1ecba ch\u1ec9 IP (nh\u01b0 l\u00e0 192.168.3.4)", "- T\u00ean kh\u00f4ng \u0111\u01b0\u1ee3c b\u1eaft \u0111\u1ea7u v\u1edbi ti\u1ec1n t\u1ed1 \"xn--\"", "- T\u00ean kh\u00f4ng \u0111\u01b0\u1ee3c k\u1ebft th\u00fac v\u1edbi h\u1eadu t\u1ed1 \"-s3alias\"", "- T\u00ean ph\u1ea3i l\u00e0 duy nh\u1ea5t trong 1 ph\u00e2n v\u00f9ng (hi\u1ec7n c\u00f3 3 ph\u00e2n v\u00f9ng: -   `aws`\u00a0(Standard Regions),\u00a0`aws-cn`\u00a0(China Regions), and\u00a0`aws-us-gov`\u00a0(AWS GovCloud (US)).", "- T\u00ean khi s\u1eed d\u1ee5ng d\u1ecbch v\u1ee5 __S3 Transfer Acceleration__ kh\u00f4ng \u0111\u01b0\u1ee3c c\u00f3 d\u1ea5u (.)", "", "__Objects__ : L\u00e0 c\u00e1c th\u1ef1c th\u1ec3 c\u01a1 b\u1ea3n \u0111\u01b0\u1ee3c l\u01b0u tr\u1eef trong Amazon S3. Objects ch\u1ee9c d\u1eef li\u1ec7u v\u00e0 c\u00e1c metadata. C\u00e1c metadata l\u00e0 c\u00e1c c\u1eb7p name-value \u0111\u01b0\u1ee3c s\u1eed d\u1ee5ng \u0111\u1ec3 m\u00f4 t\u1ea3 object. C\u00e1c metadata default nh\u01b0: ", "- The date last modified ", "- The standard HTTP metadata", "- Content-Type", " ", "M\u1ed9t object l\u00e0 duy nh\u1ea5t trong bucket b\u1edfi key (name) v\u00e0 version ID (n\u1ebfu b\u1ea1n enable S3 Versioning cho bucket \u0111\u00f3).", "", "__Keys__ : L\u00e0 t\u00ean c\u1ee7a object \u0111\u00f3, n\u00f3 l\u00e0 \u0111\u1ecbnh danh unique cho m\u1ed9t object trong bucket. M\u1ed7i m\u1ed9t object trong bucket \u0111\u01b0\u1ee3c x\u00e1c \u0111\u1ecbnh v\u1edbi 1 key ", "", "VD: Ta c\u00f3 1 URL: `https://DOC-EXAMPLE-BUCKET.s3.us-west-2.amazonaws.com/photos/puppy.jpg`", "", "__DOC-EXAMPLE-BUCKET__  l\u00e0 bucket name", "__photos/puppy.jpg__ l\u00e0 key c\u1ee7a object \u0111ang truy c\u1eadp", "", "__S3 Versioning__ : ", "- Ch\u00fang ta c\u00f3 th\u1ec3 t\u1ea1o c\u00e1c version c\u1ee7a 1 object", "- T\u00ednh n\u0103ng n\u00e0y \u0111\u01b0\u1ee3c enable \u1edf __bucket level__", "- Khi 1 object c\u00f3 chung key th\u00ec version s\u1ebd \u0111\u01b0\u1ee3c t\u1ef1 \u0111\u1ed9ng t\u1ea1o ra", "- Khi t\u1ea1o object \u0111\u00f3 l\u1ea7n \u0111\u1ea7u ti\u00ean th\u00ec version ID c\u1ee7a n\u00f3 s\u1ebd l\u00e0 null", "", "__Bucket policy__ : l\u00e0 resource-based AWS Identity v\u00e0 IAM policy m\u00e0 b\u1ea1n c\u00f3 th\u1ec3 s\u1eed d\u1ee5ng \u0111\u1ec3 c\u1ea5p quy\u1ec1n truy c\u1eadp bucket v\u00e0 c\u00e1c objects. Ch\u1ec9 c\u00f3 bucket owner m\u1edbi c\u00f3 th\u1ec3 li\u00ean k\u1ebft policy v\u1edbi bucket \u0111\u00f3.", "", "*Bucket policies \u0111\u01b0\u1ee3c gi\u1edbi h\u1ea1n \u1edf k\u00edch th\u01b0\u1edbc 20KB*", "", ""]}